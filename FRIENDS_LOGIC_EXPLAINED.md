# üîç –õ–æ–≥–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã –¥—Ä—É–∑–µ–π - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã `friends`

```
id | userId (–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å) | friendId (–ø–æ–ª—É—á–∞—Ç–µ–ª—å) | status | createdAt
```

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞

### 1Ô∏è‚É£ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤ –¥—Ä—É–∑—å—è
**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é B**:
```
INSERT: userId=A, friendId=B, status=PENDING
```

### 2Ô∏è‚É£ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B** –≤–∏–¥–∏—Ç –≤—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã:
```sql
SELECT * FROM friends 
WHERE friendId = B AND status = 'PENDING'
JOIN users ON friends.userId = users.id  -- –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –û–¢–ü–†–ê–í–ò–¢–ï–õ–Ø
```
–†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B –≤–∏–¥–∏—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è A

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A** –ù–ï –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –≤ —Ä–∞–∑–¥–µ–ª–µ "–ó–∞–ø—Ä–æ—Å—ã –≤ –¥—Ä—É–∑—å—è", –ø–æ—Ç–æ–º—É —á—Ç–æ:
- `friendId = A` –≤–µ—Ä–Ω–µ—Ç –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–∑–∞–ø—Ä–æ—Å –±—ã–ª —Å–æ–∑–¥–∞–Ω —Å friendId=B)

### 3Ô∏è‚É£ –ü—Ä–∏–Ω—è—Ç–∏–µ/–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
–¢–æ–ª—å–∫–æ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B** (–ø–æ–ª—É—á–∞—Ç–µ–ª—å) –º–æ–∂–µ—Ç –ø—Ä–∏–Ω—è—Ç—å/–æ—Ç–∫–ª–æ–Ω–∏—Ç—å:
```sql
UPDATE friends SET status = 'ACCEPTED' 
WHERE id = ? AND friendId = B
```

### 4Ô∏è‚É£ –°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π (–ø–æ—Å–ª–µ –ø—Ä–∏–Ω—è—Ç–∏—è)
–û–±–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞:
```sql
SELECT * FROM friends 
WHERE (userId = A OR friendId = A) AND status = 'ACCEPTED'
```

## ‚ùå –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### –û—à–∏–±–∫–∞ 1: "–Ø –≤–∏–∂—É —Å–≤–æ–π –∂–µ –∑–∞–ø—Ä–æ—Å"
**–ü—Ä–∏—á–∏–Ω–∞**: –í—ã —Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–ó–∞–ø—Ä–æ—Å—ã" –Ω–∞ –°–í–û–ï–ú –∞–∫–∫–∞—É–Ω—Ç–µ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
**–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª—è (–ê–¥–º–∏–Ω –ê–¥–º–∏–Ω–æ–≤) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–º

### –û—à–∏–±–∫–∞ 2: "–ó–∞–ø—Ä–æ—Å –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç"
**–ü—Ä–∏—á–∏–Ω–∞**: WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ –¥–æ—Ö–æ–¥–∏—Ç –∏–ª–∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –Ω–µ –≤ —Å–µ—Ç–∏
**–†–µ—à–µ–Ω–∏–µ**: 
1. –ü–æ–ª—É—á–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–î—Ä—É–∑—å—è"
3. –°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è

### –û—à–∏–±–∫–∞ 3: "–í–∏–∂—É –∑–∞–ø—Ä–æ—Å –æ—Ç —Å–µ–±—è"
**–ü—Ä–∏—á–∏–Ω–∞**: –û—à–∏–±–∫–∞ –≤ SQL –∑–∞–ø—Ä–æ—Å–µ - JOIN –¥–µ–ª–∞–µ—Ç—Å—è –Ω–µ —Å —Ç–æ–π —Å—Ç–æ—Ä–æ–Ω—ã
**–¢–µ–∫—É—â–∏–π –∑–∞–ø—Ä–æ—Å (–ü–†–ê–í–ò–õ–¨–ù–´–ô)**:
```sql
SELECT f.*, u.* FROM friends f
INNER JOIN users u ON f.userId = u.id  -- –ë–µ—Ä–µ–º –¥–∞–Ω–Ω—ã–µ –û–¢–ü–†–ê–í–ò–¢–ï–õ–Ø
WHERE f.friendId = ? AND f.status = 'PENDING'  -- –ì–¥–µ –Ø –ø–æ–ª—É—á–∞—Ç–µ–ª—å
```

## ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Demo** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å **–ê–¥–º–∏–Ω—É –ê–¥–º–∏–Ω–æ–≤—É**
   - –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å: `userId=demo_id, friendId=admin_id, status=PENDING`
   
2. **–ê–¥–º–∏–Ω –ê–¥–º–∏–Ω–æ–≤** –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–î—Ä—É–∑—å—è"
   - –í–∏–¥–∏—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç Demo
   - –ú–æ–∂–µ—Ç –ø—Ä–∏–Ω—è—Ç—å –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å

3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Demo** –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–î—Ä—É–∑—å—è"
   - –ù–ï –≤–∏–¥–∏—Ç —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –≤ —Ä–∞–∑–¥–µ–ª–µ "–ó–∞–ø—Ä–æ—Å—ã"
   - –ú–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å —Å—Ç–∞—Ç—É—Å "–û–∂–∏–¥–∞–µ—Ç –æ—Ç–≤–µ—Ç–∞" –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –ê–¥–º–∏–Ω–∞

## üêõ –û—Ç–ª–∞–¥–∫–∞

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞:
```
üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: userId=<–≤–∞—à_id>, targetUsername=<–∏–º—è_–ø–æ–ª—É—á–∞—Ç–µ–ª—è>
üíæ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏: userId=<–≤–∞—à_id>, friendId=<id_–ø–æ–ª—É—á–∞—Ç–µ–ª—è>
üë• –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è friend:request –¥–ª—è <–ø–æ–ª—É—á–∞—Ç–µ–ª—å>
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è:
```
üìö –ó–∞–ø—Ä–æ—Å —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π –¥–ª—è userId=<id_–ø–æ–ª—É—á–∞—Ç–µ–ª—è>
üì¨ –ù–∞–π–¥–µ–Ω–æ –∑–∞–ø—Ä–æ—Å–æ–≤: 1
  - –û—Ç userId=<–≤–∞—à_id> –∫ friendId=<id_–ø–æ–ª—É—á–∞—Ç–µ–ª—è>
```

## üîß –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

1. –û—á–∏—Å—Ç–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É friends: `DELETE FROM friends;`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞–ø—Ä–æ—Å –∑–∞–Ω–æ–≤–æ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞
