# üöÄ –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –î–µ–ø–ª–æ–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ –Ω–∞ Timeweb Cloud

## –®–∞–≥ 1: –í—ã–±–æ—Ä —É—Å–ª—É–≥–∏

–ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ Timeweb –≤—ã–±–µ—Ä–∏—Ç–µ:
**"–û–±–ª–∞—á–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã VPS/VDS"**

---

## –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞

### –ß—Ç–æ –≤—ã–±—Ä–∞—Ç—å:

1. **–û–±—Ä–∞–∑ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã**
   - –í—ã–±–µ—Ä–∏—Ç–µ: `Ubuntu 22.04`

2. **–†–µ–≥–∏–æ–Ω** ‚ö†Ô∏è
   - –ï—Å–ª–∏ –≤—Å–µ —Ä–∞—Å–ø—Ä–æ–¥–∞–Ω–æ ‚Üí –Ω–∞–ø–∏—à–∏—Ç–µ –≤ —á–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (—Å–ø—Ä–∞–≤–∞ –≤–Ω–∏–∑—É)
   - –ò–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π –¥–æ—Å—Ç—É–ø–Ω—ã–π —Ä–µ–≥–∏–æ–Ω

3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
   - –¢–∏–ø: `–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è`
   - –¢–∞—Ä–∏—Ñ: `–ë–∞–∑–æ–≤—ã–π` (2 vCPU, 2 GB RAM, 10 GB SSD)
   - –¶–µ–Ω–∞: ~169‚ÇΩ/–º–µ—Å—è—Ü

4. **–°–µ—Ç—å**
   - ‚úÖ IPv4: –í–∫–ª—é—á–∏—Ç—å
   - ‚úÖ –ü—É–±–ª–∏—á–Ω—ã–π IP: –û—Å—Ç–∞–≤–∏—Ç—å (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
   - ‚ùå IPv6: –ù–µ –Ω—É–∂–µ–Ω
   - ‚ùå –ü—Ä–∏–≤–∞—Ç–Ω–∞—è —Å–µ—Ç—å: –ù–µ –Ω—É–∂–Ω–∞

5. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏**
   - ‚úÖ –ë—ç–∫–∞–ø—ã: 1 (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)

6. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**
   - ‚úÖ –î–æ—Å—Ç—É–ø –ø–æ SSH —Å –ø–æ–º–æ—â—å—é –ø–∞—Ä–æ–ª—è: –†–∞–∑—Ä–µ—à–µ–Ω
   - ‚úÖ –ü–∞—Ä–æ–ª—å –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

7. **Cloud-init**
   - –û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º

8. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ**
   - –ò–º—è: `Messenger`
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: `–ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –¥–ª—è –∫–æ–ª–ª–µ–¥–∂–∞`
   - –ü—Ä–æ–µ–∫—Ç: `–û–±—â–∏–π –ø—Ä–æ–µ–∫—Ç`

9. **–ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–µ—Ä"**

---

## –®–∞–≥ 3: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞:

1. –ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–º
2. –ù–∞–π–¥–∏—Ç–µ:
   - **IP-–∞–¥—Ä–µ—Å** (–Ω–∞–ø—Ä–∏–º–µ—Ä: 185.xxx.xxx.xxx)
   - **–ü–∞—Ä–æ–ª—å root** (–≤ —Ä–∞–∑–¥–µ–ª–µ "–î–æ—Å—Ç—É–ø—ã" –∏–ª–∏ –≤ –ø–∏—Å—å–º–µ –Ω–∞ email)

---

## –®–∞–≥ 4: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

### –î–ª—è Windows:

1. –°–∫–∞—á–∞–π—Ç–µ **PuTTY**: https://www.putty.org/
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ PuTTY
3. –í –ø–æ–ª–µ "Host Name" –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à IP-–∞–¥—Ä–µ—Å
4. Port: `22`
5. –ù–∞–∂–º–∏—Ç–µ "Open"
6. –í–≤–µ–¥–∏—Ç–µ:
   - Login: `root`
   - Password: (–≤—Å—Ç–∞–≤—å—Ç–µ –ø–∞—Ä–æ–ª—å –∏–∑ Timeweb)

---

## –®–∞–≥ 5: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏ –≤ PuTTY:

```bash
# 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
apt update && apt upgrade -y

# 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js 18
curl -fsSL https://deb.nodesource.com/setup_18.x | bash -
apt install -y nodejs

# 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL
apt install -y postgresql postgresql-contrib

# 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Redis
apt install -y redis-server

# 5. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx
apt install -y nginx

# 6. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2
npm install -g pm2

# 7. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git
apt install -y git
```

---

## –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL

```bash
# –í–æ–π–¥–∏—Ç–µ –≤ PostgreSQL
sudo -u postgres psql

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã (–ø–æ –æ–¥–Ω–æ–π):
CREATE DATABASE messenger;
CREATE USER messenger_user WITH PASSWORD 'Messenger2025!Strong';
GRANT ALL PRIVILEGES ON DATABASE messenger TO messenger_user;
\q
```

---

## –®–∞–≥ 7: –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ Git (–µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –Ω–∞ GitHub)

```bash
cd /var/www
git clone https://github.com/–≤–∞—à-username/messenger.git
cd messenger
```

### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ó–∞–≥—Ä—É–∑–∫–∞ —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ (–ø—Ä–æ—â–µ)

1. –°–∫–∞—á–∞–π—Ç–µ **WinSCP**: https://winscp.net/
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å:
   - –ü—Ä–æ—Ç–æ–∫–æ–ª: `SFTP`
   - –•–æ—Å—Ç: –≤–∞—à IP-–∞–¥—Ä–µ—Å
   - –ü–æ—Ä—Ç: `22`
   - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `root`
   - –ü–∞—Ä–æ–ª—å: –≤–∞—à –ø–∞—Ä–æ–ª—å
3. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É `/var/www/messenger`
4. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –≤—Å—é –ø–∞–ø–∫—É `–ø—Ä–æ–µ–∫—Ç` —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –≤ `/var/www/messenger`

---

## –®–∞–≥ 8: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±—ç–∫–µ–Ω–¥–∞

```bash
cd /var/www/messenger/server

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª
nano .env
```

–í—Å—Ç–∞–≤—å—Ç–µ (–∑–∞–º–µ–Ω–∏—Ç–µ `–í–ê–®_IP` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π IP):

```env
NODE_ENV=production
PORT=3001
DATABASE_URL="postgresql://messenger_user:Messenger2025!Strong@localhost:5432/messenger"
REDIS_URL="redis://localhost:6379"
JWT_SECRET="super-secret-jwt-key-min-32-chars-12345678"
JWT_REFRESH_SECRET="super-secret-refresh-key-min-32-chars-87654321"
CLIENT_URL="http://–í–ê–®_IP"
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ: `Ctrl+O`, `Enter`, `Ctrl+X`

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
npx prisma generate
npx prisma db push

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
pm2 start index.js --name messenger-server
pm2 save
pm2 startup
```

---

## –®–∞–≥ 9: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

```bash
cd /var/www/messenger/client

# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª
nano .env
```

–í—Å—Ç–∞–≤—å—Ç–µ (–∑–∞–º–µ–Ω–∏—Ç–µ `–í–ê–®_IP`):

```env
VITE_API_URL=http://–í–ê–®_IP:3001
VITE_WS_URL=ws://–í–ê–®_IP:3001
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ: `Ctrl+O`, `Enter`, `Ctrl+X`

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–æ–±–µ—Ä–∏—Ç–µ
npm install
npm run build
```

---

## –®–∞–≥ 10: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx

```bash
nano /etc/nginx/sites-available/messenger
```

–í—Å—Ç–∞–≤—å—Ç–µ (–∑–∞–º–µ–Ω–∏—Ç–µ `–í–ê–®_IP`):

```nginx
server {
    listen 80;
    server_name –í–ê–®_IP;

    # –§—Ä–æ–Ω—Ç–µ–Ω–¥
    location / {
        root /var/www/messenger/client/dist;
        try_files $uri $uri/ /index.html;
    }

    # API
    location /api {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    # WebSocket
    location /socket.io {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
    }
}
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ: `Ctrl+O`, `Enter`, `Ctrl+X`

```bash
# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
ln -s /etc/nginx/sites-available/messenger /etc/nginx/sites-enabled/
nginx -t
systemctl restart nginx
```

---

## –®–∞–≥ 11: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞

```bash
ufw allow 22/tcp
ufw allow 80/tcp
ufw allow 443/tcp
ufw enable
```

–ü—Ä–∏ –≤–æ–ø—Ä–æ—Å–µ –Ω–∞–∂–º–∏—Ç–µ `y`

---

## –®–∞–≥ 12: –ü—Ä–æ–≤–µ—Ä–∫–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –∑–∞–π–¥–∏—Ç–µ –Ω–∞:
```
http://–í–ê–®_IP
```

–î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä! üéâ

---

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞
pm2 logs messenger-server

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
pm2 restart messenger-server

# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞
pm2 status

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
pm2 stop messenger-server
```

---

## üåê –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –¥–æ–º–µ–Ω —Ç–∏–ø–∞ messenger.ru:

1. **–ö—É–ø–∏—Ç–µ –¥–æ–º–µ–Ω –≤ Timeweb** (—Ä–∞–∑–¥–µ–ª "–î–æ–º–µ–Ω—ã")
   - .RU - 179‚ÇΩ/–≥–æ–¥
   - .COM - 1490‚ÇΩ/–≥–æ–¥

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ Timeweb)

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç:**

```bash
apt install -y certbot python3-certbot-nginx
certbot --nginx -d –≤–∞—à-–¥–æ–º–µ–Ω.ru
```

4. **–û–±–Ω–æ–≤–∏—Ç–µ .env —Ñ–∞–π–ª—ã:**

```bash
# server/.env
CLIENT_URL="https://–≤–∞—à-–¥–æ–º–µ–Ω.ru"

# client/.env
VITE_API_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.ru
VITE_WS_URL=wss://–≤–∞—à-–¥–æ–º–µ–Ω.ru
```

5. **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ:**

```bash
cd /var/www/messenger/client
npm run build
pm2 restart messenger-server
```

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

- **VPS**: 169‚ÇΩ/–º–µ—Å—è—Ü
- **–î–æ–º–µ–Ω .RU**: 179‚ÇΩ/–≥–æ–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **SSL**: –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
- **–ò—Ç–æ–≥–æ**: ~169‚ÇΩ/–º–µ—Å—è—Ü

---

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   pm2 logs messenger-server
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:**
   ```bash
   pm2 status
   systemctl status nginx
   systemctl status postgresql
   systemctl status redis
   ```

3. **–ù–∞–ø–∏—à–∏—Ç–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É Timeweb:**
   - –ß–∞—Ç –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—Å–ø—Ä–∞–≤–∞ –≤–Ω–∏–∑—É)
   - Telegram: @timeweb_support
   - –¢–µ–ª–µ—Ñ–æ–Ω: 8 (800) 700-06-08

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–í–∞—à –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ `http://–í–ê–®_IP`

–ú–æ–∂–µ—Ç–µ –¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π —Å–æ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏! üéâ
