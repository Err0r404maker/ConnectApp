# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
–£—á–∞—Å—Ç–Ω–∏–∫–∏ —á–∞—Ç–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏ SQL: `no such column: u.isOnline`

## ‚úÖ –†–µ—à–µ–Ω–∏–µ
–ó–∞–º–µ–Ω–∏–ª `u.isOnline` –Ω–∞ `CASE WHEN u.status = 'ONLINE' THEN 1 ELSE 0 END as isOnline`

## üìù –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –§–∞–π–ª: `server/routes/chats-simple.js`

**–ë—ã–ª–æ:**
```sql
SELECT cm.userId, cm.role, cm.joinedAt, u.username, u.firstName, u.lastName, u.avatar, u.isOnline
FROM chat_members cm
LEFT JOIN users u ON cm.userId = u.id
WHERE cm.chatId = ?
```

**–°—Ç–∞–ª–æ:**
```sql
SELECT cm.userId, cm.role, cm.joinedAt, u.username, u.firstName, u.lastName, u.avatar, 
       CASE WHEN u.status = 'ONLINE' THEN 1 ELSE 0 END as isOnline
FROM chat_members cm
LEFT JOIN users u ON cm.userId = u.id
WHERE cm.chatId = ?
```

## üöÄ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
```bash
cd server
npm run dev
```

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –∞–≤–∞—Ç–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ —à–∞–ø–∫–µ —á–∞—Ç–∞
- –°—á–µ—Ç—á–∏–∫ –ø–æ–∫–∞–∂–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ

### 3. –¢–µ—Å—Ç —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç:
```bash
node test-members-api.js
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```
‚úÖ –í–∞–ª–∏–¥–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤: N
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚ùå –û—à–∏–±–∫–∞ 500 –Ω–∞ `/api/chats/:chatId/members`
- ‚ùå –°—á–µ—Ç—á–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–ª 0
- ‚ùå –ê–≤–∞—Ç–∞—Ä—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- ‚úÖ –°—á–µ—Ç—á–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —á–∏—Å–ª–æ
- ‚úÖ –ê–≤–∞—Ç–∞—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- ‚úÖ –ö–ª–∏–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

## üéØ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–π —á–∞—Ç
2. –í —à–∞–ø–∫–µ —á–∞—Ç–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:
   - –ê–≤–∞—Ç–∞—Ä—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–¥–æ 3 —à—Ç—É–∫)
   - –°—á–µ—Ç—á–∏–∫ —Å —á–∏—Å–ª–æ–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Å—á–µ—Ç—á–∏–∫
4. –û—Ç–∫—Ä–æ–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ –≤—Å–µ–º–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É—á–∞—Å—Ç–Ω–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–æ –≤—Å–µ—Ö —á–∞—Ç–∞—Ö.
