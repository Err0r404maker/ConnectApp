# ‚úÖ –ü–æ–ª–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ—Ñ–∏–ª—è

## ‚ùå –ü—Ä–æ–±–ª–µ–º—ã

1. **–¢–µ–º–∞ –Ω–µ –º–µ–Ω—è–ª–∞—Å—å** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è–ª–∏—Å—å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
2. **–¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞** - –Ω–µ –ø—Ä–∏–º–µ–Ω—è–ª–∞—Å—å –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
3. **–ó–≤—É–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** - –≤—Å–µ –≥–∞–ª–æ—á–∫–∏ –≤—ã–±–∏—Ä–∞–ª–∏—Å—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å** - –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞–ª–∏—Å—å

## ‚úÖ –†–µ—à–µ–Ω–∏—è

### 1. –†–∞—Å—à–∏—Ä–µ–Ω settingsStore

**–§–∞–π–ª:** `client/src/store/settingsStore.ts`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –•—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–≤—É–∫–æ–≤ (4 —Ç–∏–ø–∞)
- –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```typescript
interface NotificationSettings {
  messageSent: boolean;      // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
  messageReceived: boolean;  // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
  reactions: boolean;        // –†–µ–∞–∫—Ü–∏–∏
  notifications: boolean;    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
}

interface SettingsState {
  theme: 'light' | 'dark' | 'auto';
  colorScheme: string;
  fontSize: number;
  animations: boolean;
  musicEnabled: boolean;
  playlist: string;
  volume: number;
  notificationSounds: NotificationSettings;
}
```

**–§—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:**
```typescript
const applyTheme = (theme) => {
  let isDark = theme === 'dark' || 
    (theme === 'auto' && window.matchMedia('(prefers-color-scheme: dark)').matches);
  document.documentElement.classList.toggle('dark', isDark);
};

const applyColorScheme = (scheme) => {
  document.documentElement.setAttribute('data-color-scheme', scheme);
};

const applyFontSize = (size) => {
  document.documentElement.style.fontSize = `${size}px`;
};
```

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å EnhancedProfileSettings

**–§–∞–π–ª:** `client/src/components/EnhancedProfileSettings.tsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

#### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–º—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:
```typescript
<button onClick={() => { 
  setTheme(t.id); 
  settings.setTheme(t.id); // –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Å—Ä–∞–∑—É
}}>
```

#### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º—ã:
```typescript
<button onClick={() => { 
  setColorScheme(scheme.id); 
  settings.setColorScheme(scheme.id); // –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Å—Ä–∞–∑—É
}}>
```

#### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —à—Ä–∏—Ñ—Ç–∞:
```typescript
<input onChange={(e) => { 
  const size = Number(e.target.value); 
  setFontSize(size); 
  settings.setFontSize(size); // –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Å—Ä–∞–∑—É
}} />
```

#### –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –≥–∞–ª–æ—á–∫–∏ –∑–≤—É–∫–æ–≤:
```typescript
{[
  { label: '–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è', key: 'messageSent' },
  { label: '–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è', key: 'messageReceived' },
  { label: '–†–µ–∞–∫—Ü–∏–∏', key: 'reactions' },
  { label: '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è', key: 'notifications' }
].map((sound) => (
  <input 
    checked={notificationSounds[sound.key]} 
    onChange={(e) => setNotificationSounds(prev => ({ 
      ...prev, 
      [sound.key]: e.target.checked 
    }))} 
  />
))}
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω soundManager

**–§–∞–π–ª:** `client/src/utils/sounds.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£–¥–∞–ª–µ–Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `enabled`
- –ö–∞–∂–¥—ã–π –∑–≤—É–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–≤–æ—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏–∑ store
- –î–æ–±–∞–≤–ª–µ–Ω –∑–≤—É–∫ —Ä–µ–∞–∫—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä:**
```typescript
playMessageReceived() {
  const settings = useSettingsStore.getState();
  if (!settings.notificationSounds.messageReceived) return;
  this.playTone(800, 0.1);
}

playMessageSent() {
  const settings = useSettingsStore.getState();
  if (!settings.notificationSounds.messageSent) return;
  this.playTone(600, 0.05);
}

playReaction() {
  const settings = useSettingsStore.getState();
  if (!settings.notificationSounds.reactions) return;
  this.playTone(900, 0.08);
}
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è:
- ‚úÖ –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- ‚úÖ –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- ‚úÖ –ê–≤—Ç–æ —Ç–µ–º–∞ —Å–ª–µ–¥—É–µ—Ç –∑–∞ —Å–∏—Å—Ç–µ–º–æ–π
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

### ‚úÖ –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞:
- ‚úÖ 5 —Ü–≤–µ—Ç–æ–≤: —Å–∏–Ω–∏–π, —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π, –∑–µ–ª–µ–Ω—ã–π, —Ä–æ–∑–æ–≤—ã–π, –æ—Ä–∞–Ω–∂–µ–≤—ã–π
- ‚úÖ –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ data-–∞—Ç—Ä–∏–±—É—Ç
- ‚úÖ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ CSS: `[data-color-scheme="blue"]`

### ‚úÖ –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞:
- ‚úÖ –î–∏–∞–ø–∞–∑–æ–Ω 12-20px
- ‚úÖ –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ –∫–æ—Ä–Ω–µ–≤–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É
- ‚úÖ –ò–∑–º–µ–Ω—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### ‚úÖ –ó–≤—É–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
- ‚úÖ 4 –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è - —Å–≤–æ–π –∑–≤—É–∫
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è - —Å–≤–æ–π –∑–≤—É–∫
- ‚úÖ –†–µ–∞–∫—Ü–∏–∏ - —Å–≤–æ–π –∑–≤—É–∫
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è - —Å–≤–æ–π –∑–≤—É–∫

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:
```
1. –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ settingsStore (localStorage)
2. –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ - –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å
3. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ UI
```

### –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
```
1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ state
2. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ settingsStore (—Å—Ä–∞–∑—É —Ä–∞–±–æ—Ç–∞–µ—Ç)
3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ DOM (—Ç–µ–º–∞, —Ü–≤–µ—Ç, —à—Ä–∏—Ñ—Ç)
```

### –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏:
```
1. –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ settingsStore
3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

## üé® CSS –¥–ª—è —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º—ã

–î–æ–±–∞–≤—å—Ç–µ –≤ `index.css`:

```css
/* –¶–≤–µ—Ç–æ–≤—ã–µ —Å—Ö–µ–º—ã */
[data-color-scheme="blue"] {
  --primary: #3b82f6;
  --primary-dark: #2563eb;
}

[data-color-scheme="purple"] {
  --primary: #a855f7;
  --primary-dark: #9333ea;
}

[data-color-scheme="green"] {
  --primary: #10b981;
  --primary-dark: #059669;
}

[data-color-scheme="pink"] {
  --primary: #ec4899;
  --primary-dark: #db2777;
}

[data-color-scheme="orange"] {
  --primary: #f97316;
  --primary-dark: #ea580c;
}

/* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ */
.button-primary {
  background-color: var(--primary);
}

.button-primary:hover {
  background-color: var(--primary-dark);
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ —Ç–µ–º—É ‚Üí –î–æ–ª–∂–Ω–∞ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è —Å—Ä–∞–∑—É
3. ‚úÖ –í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç ‚Üí –î–æ–ª–∂–µ–Ω –ø—Ä–∏–º–µ–Ω–∏—Ç—å—Å—è
4. ‚úÖ –ò–∑–º–µ–Ω–∏—Ç–µ —à—Ä–∏—Ñ—Ç ‚Üí –î–æ–ª–∂–µ–Ω —É–≤–µ–ª–∏—á–∏—Ç—å—Å—è/—É–º–µ–Ω—å—à–∏—Ç—å—Å—è
5. ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ –ú—É–∑—ã–∫–∞ ‚Üí –ó–≤—É–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
6. ‚úÖ –û—Ç–∫–ª—é—á–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è"
7. ‚úÖ –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Üí –ó–≤—É–∫–∞ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å
8. ‚úÖ –í–∫–ª—é—á–∏—Ç–µ –æ–±—Ä–∞—Ç–Ω–æ ‚Üí –ó–≤—É–∫ –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è
9. ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ ‚Üí –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
10. ‚úÖ –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è

### localStorage (settingsStore):
```json
{
  "state": {
    "theme": "dark",
    "colorScheme": "blue",
    "fontSize": 16,
    "animations": true,
    "musicEnabled": false,
    "playlist": "lofi",
    "volume": 70,
    "notificationSounds": {
      "messageSent": true,
      "messageReceived": true,
      "reactions": false,
      "notifications": true
    }
  }
}
```

### Backend (users.settings):
```json
{
  "theme": "dark",
  "colorScheme": "blue",
  "fontSize": 16,
  "animations": true,
  "musicEnabled": false,
  "playlist": "lofi",
  "volume": 70,
  "notificationSounds": {
    "messageSent": true,
    "messageReceived": true,
    "reactions": false,
    "notifications": true
  }
}
```

## üöÄ –ó–∞–ø—É—Å–∫

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
npm run dev
```

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é! üéâ

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

1. **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–º—ã** - –ø–æ–∫–∞–∑–∞—Ç—å –∫–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å
2. **–≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫** - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ñ–∞–π–ª
3. **–ü—Ä–µ—Å–µ—Ç—ã** - –≥–æ—Ç–æ–≤—ã–µ –Ω–∞–±–æ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫
4. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏** - —á–µ—Ä–µ–∑ –∞–∫–∫–∞—É–Ω—Ç
5. **–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–º—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
